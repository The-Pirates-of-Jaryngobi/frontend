
<!--Result.vue-->
<template>
    <div>
        <ResultHero :menu_name="menu_name" :searchResults="searchResults" />
        <ResultDetail :menu_name="menu_name" :searchResults="searchResults" />
    </div>
</template>

<script>
import ResultHero from '../components/ResultHero.vue';
import ResultDetail from '../components/ResultDetail.vue';
import { checkDataInDB } from '../api/backend.js';

export default {
    props: {
        $route: {
            type: Object,
            required: true
        }
    },
    computed: {
        // 라우터 파라미터로부터 menu_name 가져오기
        menu_name() {
            return this.$route.params.menu_name;
        },
        // 검색 결과를 반환
        async searchResults() {
            try {
                const menu_name = this.$route.params.menu_name;
                const response = await checkDataInDB(menu_name);
                if (response) {
                    return response.data; // 실제로 받은 데이터를 반환합니다.
                } else {
                    this.$router.push('/noresult');
                }
            } catch (error) {
                console.error('데이터 가져오기 실패:', error);
                return null; // 데이터를 가져오지 못한 경우 null을 반환합니다.
            }
        }
    },
    components: {
        ResultHero,
        ResultDetail,
    },
};
</script>

